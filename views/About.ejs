
    <!DOCTYPE html>
    <head>
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="../stylesheets/style.css">
	<link rel="stylesheet" href="../stylesheets/verticalTabs.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <style>
    div.relative {
        position: relative;
        border: 3px;
    }

    div.absolute {
        position: absolute;
        top: 50px;
        right: 0;
        width: 200px;
        height: 400px;
        border: 3px solid #BAC0C6;
        background:#EDF0F5;
    }
    div.notification {
        position: absolute;
        top : 20 px;
    }
    </style>
    </head>
    <body>
    <div ng-app= "myApp" ng-controller = "overViewController">
      <nav class="navbar navbar-default" style="background-color:#3A5795;">
        <div class="container-fluid relative">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/homepage">Home</a></li>
              <li><a href="/aboutPage">About</a></li>
              <li><a href="/Group">Groups</a></li>
              <li><button type="button" class="btn btn-danger notification"  ng-click = "checkNotification()">Notifications <span class="badge">{{count}}</span></button></li>
              <li><a href="/signOut">Signout</a></li>
            </ul>
          </div>
      </nav>
      <div ng-show = "show" class= "container absolute" style="overflow-y:scroll;">
              <div ng-repeat = "notification in notifications" >
              <p>you have got one frined request from : {{notification.requestfrom}}</p>
              <input type="button" class="btn btn-success" ng-click="acceptFriend(notification.requestfrom)" value="Accept" id="{{notification.requestfrom}}" >
              <input type="button" class="btn btn-danger" ng-click="rejectFriend(notification.requestfrom)" value="Reject" id="{{notification.requestfrom}}">
              <!-- <button type="button" class="btn btn-success">Accept</button>
              <button type="button" class="btn btn-danger">Reject</button> -->
              </div>
      </div>
      <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" ng-click= "overview()" href="#overview" >Overview</a></li>
        <li><a data-toggle="tab" ng-click= "friends()" href="#friends">Friends</a></li>
        <li><a data-toggle="tab" ng-click= "interests()" href="#interests">Interests</a></li>
      </ul>

      <div class="tab-content">
        <div id="overview"  class="tab-pane fade in active">
        	<div class="container-fluid" style="padding-top:2%;">
	        	<div class="col-xs-3"> <!-- required for floating -->
				  <!-- Nav tabs -->
				  <ul class="nav nav-tabs tabs-left"><!-- 'tabs-right' for right tabs -->
				    <li class="active"><a href="#workAndEducation" data-toggle="tab">Work and Education</a></li>
				    <li><a href="#basicInfo" data-toggle="tab">Contact and Basic Info</a></li>
				    <li><a href="#lifeEvents" data-toggle="tab">Life Events</a></li>
				  </ul>
				</div>
				<div class="col-xs-9">
				    <!-- Tab panes -->
				    <div class="tab-content">
				      <div class="tab-pane active" id="workAndEducation">
						<table class = "table">
							<thead>
							  <tr>
       						  	<th>
       						  		<a class="showInline" ng-click="toggleDisplay(1);">
       						  			<span class = "glyphicon glyphicon-plus"></span>
       						  		</a>
       						  		Work and Education
       						  	</th>
     						  </tr>
							</thead>
							<tbody>
							  <tr ng-hide="toggle1">
						         <td>
						         	<form>
									     <div class="form-group">
									        <div class="col-md-6">
									            <label for="inputCompany" class="control-label col-xs-2">Company</label>
										        <div class="col-md-6">
										            <input type="text" class="form-control" id="inputCompany">
										        </div>
									        </div>
									    </div>
									    <div class="form-group">
									        <div class="col-md-10">
									            <button type="submit" class="btn btn-primary">Submit</button>
									        </div>
									    </div>
									</form>
						         </td>
						      </tr>
							  <tr>
						         <td>Tata Consultany Service</td>
						      </tr>
						      <tr>
						         <td>Morning Start</td>
						      </tr>
						   	</tbody>
						</table>
						<table class = "table">
							<thead>
								<tr>
       						  		<th>
       						  			<a class="showInline" ng-click="toggleDisplay(2);">
       						  				<span class = "glyphicon glyphicon-plus"></span>
       						  			</a>
       						  			Professional Skills
       						  		</th>
     						  	</tr>
							</thead>
							<tbody>
								<tr ng-hide="toggle2">
						         <td>
						         	<form>
									     <div class="form-group">
									        <div class="col-md-6">
									            <label for="inputSkills" class="control-label col-xs-2">Skills</label>
										        <div class="col-md-6">
										            <input type="text" class="form-control" id="inputSkills">
										        </div>
									        </div>
									    </div>
									    <div class="form-group">
									        <div class="col-md-10">
									            <button type="submit" class="btn btn-primary">Submit</button>
									        </div>
									    </div>
									</form>
						         </td>
						      </tr>
							  <tr>
						         <td>IOS Developer</td>
						      </tr>
						      <tr>
						         <td>Jenkins Developer</td>
						      </tr>
						      <tr>
						         <td>Java Developer</td>
						      </tr>
						   	</tbody>
						</table>
						<table class = "table">
							<thead>
								<tr>
       						  		<th>
       						  			<a class="showInline" ng-click="toggleDisplay(3);">
       						  				<span class = "glyphicon glyphicon-plus"></span>
       						  			</a>
       						  			College
       						  		</th>
     						  	</tr>
							</thead>
							<tbody>
							  <tr ng-hide="toggle3">
						         <td>
						         	<form>
									     <div class="form-group">
									        <div class="col-md-6">
									            <label for="inputCollege" class="control-label col-xs-2">College</label>
										        <div class="col-md-6">
										            <input type="text" class="form-control" id="inputCollege">
										        </div>
									        </div>
									    </div>
									    <div class="form-group">
									        <div class="col-md-10">
									            <button type="submit" class="btn btn-primary">Submit</button>
									        </div>
									    </div>
									</form>
						         </td>
						      </tr>
							  <tr>
						         <td>San Jose State Univeristy</td>
						      </tr>
						   	</tbody>
						</table>
						<table class = "table">
							<thead>
								<tr>
       						  		<th>
       						  			<a class="showInline" ng-click="toggleDisplay(4);">
       						  				<span class = "glyphicon glyphicon-plus"></span>
       						  			</a>
       						  			School
       						  		</th>
     						  	</tr>
							</thead>
							<tbody>
							  <tr ng-hide="toggle4">
						         <td>
						         	<form>
									     <div class="form-group">
									        <div class="col-md-6">
									            <label for="inputSchool" class="control-label col-xs-2">School</label>
										        <div class="col-md-6">
										            <input type="text" class="form-control" id="inputSchool">
										        </div>
									        </div>
									    </div>
									    <div class="form-group">
									        <div class="col-md-10">
									            <button type="submit" class="btn btn-primary">Submit</button>
									        </div>
									    </div>
									</form>
						         </td>
						      </tr>
							  <tr>
						         <td>Bnsdsn</td>
						      </tr>
						   	</tbody>
						</table>
				      </div>
				      <div class="tab-pane" id="basicInfo">
						<table class = "table">
							<thead>
							  <tr>
       						  	<th>
       						  		<a class="showInline" ng-click="toggleDisplay(1);">
       						  			<span class = "glyphicon glyphicon-plus"></span>
       						  		</a>
       						  		Contact and Basic Info
       						  	</th>
     						  </tr>
							</thead>
							<tbody>
							  <tr ng-hide="toggle1">
						         <td>
						         	<form>
									     <div class="form-group">
									        <div class="col-md-6">
									            <label for="inputPhone" class="control-label col-xs-2">Phone</label>
										        <div class="col-md-6">
										            <input type="text" class="form-control" id="inputPhone">
										        </div>
									        </div>
									    </div>
									    <div class="form-group">
									        <div class="col-md-10">
									            <button type="submit" class="btn btn-primary">Submit</button>
									        </div>
									    </div>
									</form>
						         </td>
						      </tr>
							  <tr>
						         <td>314-330-7188</td>
						      </tr>
						   	</tbody>
						</table>
						<table class = "table">
							<thead>
								<tr>
       						  		<th>
       						  			<a class="showInline" ng-click="toggleDisplay(2);">
       						  				<span class = "glyphicon glyphicon-plus"></span>
       						  			</a>
       						  			Professional Skills
       						  		</th>
     						  	</tr>
							</thead>
							<tbody>
								<tr ng-hide="toggle2">
						         <td>
						         	<form>
									     <div class="form-group">
									        <div class="col-md-6">
									            <label for="inputEmail" class="control-label col-xs-2">Email</label>
										        <div class="col-md-6">
										            <input type="text" class="form-control" id="inputEmail">
										        </div>
									        </div>
									    </div>
									    <div class="form-group">
									        <div class="col-md-10">
									            <button type="submit" class="btn btn-primary">Submit</button>
									        </div>
									    </div>
									</form>
						         </td>
						      </tr>
							  <tr>
						         <td>person1@gmail.com</td>
						      </tr>
						   	</tbody>
						</table>
				      </div>
				      <div class="tab-pane" id="lifeEvents">
				      	<table class = "table">
							<thead>
							  <tr>
       						  	<th>
       						  		<a class="showInline" ng-click="toggleDisplay(1);">
       						  			<span class = "glyphicon glyphicon-plus"></span>
       						  		</a>
       						  		Events
       						  	</th>
     						  </tr>
							</thead>
							<tbody>
							  <tr ng-hide="toggle1">
						         <td>
						         	<form>
									     <div class="form-group">
									        <div class="col-md-6">
									            <label for="inputEvent" class="control-label col-xs-2">Event</label>
										        <div class="col-md-6">
										            <input type="text" class="form-control" id="inputEvent">
										        </div>
									        </div>
									    </div>
									    <div class="form-group">
									        <div class="col-md-6">
									            <label for="inputYear" class="control-label col-xs-2">Year</label>
										        <div class="col-md-6">
										            <input type="text" class="form-control" id="inputYear">
										        </div>
									        </div>
									    </div>
									    <div class="form-group">
									        <div class="col-md-10">
									            <button type="submit" class="btn btn-primary">Submit</button>
									        </div>
									    </div>
									</form>
						         </td>
						      </tr>
							  <tr>
						         <td>Started working at morning star</td>
						         <td>1998</td>
						      </tr>
						      <tr>
						         <td>Joined Google</td>
						         <td>2009</td>
						      </tr>
						   	</tbody>
						</table>
				      </div>
				    </div>
				</div>
        	</div>
          </div>
        <div id="friends"  class="tab-pane fade">
       		<div class="container-fluid" style="padding-top:2%;">
       			<div class="col-md-offset-2 col-md-8 col-md-offset-2">
		          <label>Email:
		            <input type="email" name="input" ng-model="email" placeholder = "Enter emailId" required>
		          </label>
		            <button type="button" class="btn btn-primary" value="sendrequest" ng-click = "sendRequest()">SendRequest</button>
		            <!-- <div ng-repeat = "friend in friendlist">
		                <span class="label label-default">{{friend}}</span>
		          </div> -->
		          <div class="list-group" style="padding:3%;">
                      <div ng-repeat = "friend in friendlist">
				    <a href="#" class="list-group-item">
				        <span class="glyphicon glyphicon-user"></span> {{friend}} <span class="badge"><span class="glyphicon glyphicon-ok"></span>Friends</span>
				    </a>

                </div>
				  </div>
				</div>
        	</div>
        </div>
        <div id="interests"  class="tab-pane fade" >
             <div class="container-fluid" style="padding-top:2%;">
       			<div class="col-md-offset-2 col-md-8 col-md-offset-2">
		          <div ng-repeat="interest in interests" class="list-group" style="padding:3%;">
				    <a href="#" class="list-group-item">
				        <span class="glyphicon glyphicon-music"></span> Music : {{interest.music }}
				    </a>
				    <a href="#" class="list-group-item">
				        <span class="glyphicon glyphicon-film"></span> Shows : {{interest.shows }}
				    </a>
				    <a href="#" class="list-group-item">
				        <span class="glyphicon glyphicon-globe"></span> Sports : {{interest.sports }}
				    </a>
				  </div>
				</div>
        	</div>
      	</div>
        </div>
    <script>
    var app = angular.module("myApp", [ ]);
    app.controller('overViewController', function($scope, $http) {
	$scope.toggle1 = true;
	$scope.toggle2 = true;
	$scope.toggle3 = true;
	$scope.toggle4 = true;
    $scope.overview = function (){

      console.log("In the method");
      $http({
        method: 'Get',
            url: '/overview',
         }).success(function(response){

           $scope.workInfoResults = JSON.parse(response.workexperience);
           console.log("connResult:>>"+$scope.workInfoResults);
            }).error(function(error){
            alert("error in overview");
        });
    }

    $scope.friends = function (){
      console.log("In the method");
      $http({
        method: 'Get',
            url: '/friends',
         }).success(function(response){
             $scope.friendlist = JSON.parse(response.friendlist);
           console.log("connResult:>>"+$scope.friendlist);
            }).error(function(error){
            alert("error in friends");
        });
    }

    $scope.sendRequest = function() {
      console.log("In the send Request method");
      $http({
        method: 'Post',
            url: '/sendRequest',
            data:{"friendId": $scope.email, "status" : "N"}
         }).success(function(response){

           console.log("connResult:>>"+$scope.workInfoResults);
            }).error(function(error){
            alert("error in friends");
        });
    }

    $scope.interests = function (){
      console.log("In the method");
      $http({
        method: 'Get',
            url: '/interests',
         }).success(function(response){

           $scope.interests = JSON.parse(response.interests);
           console.log("connResult:>>"+$scope.interests);
            }).error(function(error){
            alert("error in interests");
        });
    }

    $scope.toggleDisplay = function (i) {
     	$scope["toggle"+i] = ! $scope["toggle"+i];
    }

    $scope.show = false;
     $scope.checkNotification = function () {
             $scope.show = ! $scope.show;
        $http({
          method: 'Get',
              url: '/notifications',
           }).success(function(response){
             $scope.notifications = JSON.parse(response.notifications);
             $scope.count = $scope.notifications.length;
             console.log("connResult:>>"+$scope.notifications);
              }).error(function(error){
              alert("error in notifications");
          });
    }

    $scope.acceptFriend = function (name) {
        $scope.friendlist.push(name);
        console.log(name);
    for (var requestFrom in $scope.notifications) {
        console.log(requestFrom);
        if ( name === requestFrom) {
            var index = $scope.notifications.indexOf(requestFrom);
            $scope.notifications.splice(index,1);
        }
    }
    console.log($scope.notifications);
    }

    // $scope.rejectFriend = function (name) {
    //     angular.for (var requestFrom in $scope.notifications) {
    //         if ( name === requestFrom) {
    //             var index = $scope.notifications.indexOf(requestFrom);
    //             $scope.notifications.splice(index,1);
    //         }
    //     }
    // }

    });
    /*function toggleDisplay(i)
    {
    	$(".toggleRow"+i).toggle();
    }*/
    </script>
    </body>
    </html>
